{"file_contents":{"manage.py":{"content":"#!/usr/bin/env python\n\"\"\"Django's command-line utility for administrative tasks.\"\"\"\nimport os\nimport sys\n\n\ndef main():\n    \"\"\"Run administrative tasks.\"\"\"\n    os.environ.setdefault('DJANGO_SETTINGS_MODULE', 'mineral_licenses.settings')\n    try:\n        from django.core.management import execute_from_command_line\n    except ImportError as exc:\n        raise ImportError(\n            \"Couldn't import Django. Are you sure it's installed and \"\n            \"available on your PYTHONPATH environment variable? Did you \"\n            \"forget to activate a virtual environment?\"\n        ) from exc\n    execute_from_command_line(sys.argv)\n\n\nif __name__ == '__main__':\n    main()\n","size_bytes":672},"licenses/apps.py":{"content":"from django.apps import AppConfig\n\n\nclass LicensesConfig(AppConfig):\n    default_auto_field = 'django.db.models.BigAutoField'\n    name = 'licenses'\n","size_bytes":148},"licenses/management/commands/__init__.py":{"content":"","size_bytes":0},"licenses/__init__.py":{"content":"","size_bytes":0},"mineral_licenses/wsgi.py":{"content":"\"\"\"\nWSGI config for mineral_licenses project.\n\nIt exposes the WSGI callable as a module-level variable named ``application``.\n\nFor more information on this file, see\nhttps://docs.djangoproject.com/en/5.2/howto/deployment/wsgi/\n\"\"\"\n\nimport os\n\nfrom django.core.wsgi import get_wsgi_application\n\nos.environ.setdefault('DJANGO_SETTINGS_MODULE', 'mineral_licenses.settings')\n\napplication = get_wsgi_application()\n","size_bytes":409},"licenses/views.py":{"content":"from django.shortcuts import render, get_object_or_404, redirect\nfrom django.http import JsonResponse, FileResponse, HttpResponse\nfrom django.contrib.auth.decorators import login_required\nfrom django.contrib.auth import authenticate, login, logout\nfrom django.views.decorators.http import require_http_methods\nfrom django.core.files.storage import FileSystemStorage\nfrom .models import License, Document\nimport json\n\n\ndef map_view(request):\n    \"\"\"\n    –ì–ª–∞–≤–Ω–∞—è —Å—Ç—Ä–∞–Ω–∏—Ü–∞ —Å –∏–Ω—Ç–µ—Ä–∞–∫—Ç–∏–≤–Ω–æ–π –∫–∞—Ä—Ç–æ–π\n    \"\"\"\n    from django.conf import settings\n    return render(request, 'licenses/map.html', {\n        'yandex_maps_api_key': settings.YANDEX_MAPS_API_KEY\n    })\n\n\ndef licenses_json(request):\n    \"\"\"\n    API endpoint –¥–ª—è –ø–æ–ª—É—á–µ–Ω–∏—è —Å–ø–∏—Å–∫–∞ –ª–∏—Ü–µ–Ω–∑–∏–π –≤ —Ñ–æ—Ä–º–∞—Ç–µ JSON\n    \"\"\"\n    licenses = License.objects.all()\n    data = []\n    \n    for license in licenses:\n        # –ü—Ä–æ–≤–µ—Ä—è–µ–º –∏ –æ–±–Ω–æ–≤–ª—è–µ–º —Å—Ç–∞—Ç—É—Å, –µ—Å–ª–∏ —Å—Ä–æ–∫ –∏—Å—Ç–µ–∫\n        license.update_status_if_expired()\n\n        data.append({\n            'id': license.id,\n            'license_number': license.license_number,\n            'license_type': license.license_type,\n            'owner': license.owner,\n            'latitude': float(license.latitude) if license.latitude else None,\n            'longitude': float(license.longitude) if license.longitude else None,\n            'polygon_data': license.polygon_data,\n            'region': license.region,\n            'area': license.area,\n            'issue_date': license.issue_date.strftime('%Y-%m-%d'),\n            'expiry_date': license.expiry_date.strftime('%Y-%m-%d') if license.expiry_date else None,\n            'mineral_type': license.mineral_type,\n            'status': license.status,\n            'description': license.description,\n        })\n    \n    return JsonResponse(data, safe=False)\n\n\ndef license_detail(request, license_id):\n    \"\"\"\n    –ü–æ–ª—É—á–µ–Ω–∏–µ –¥–µ—Ç–∞–ª—å–Ω–æ–π –∏–Ω—Ñ–æ—Ä–º–∞—Ü–∏–∏ –æ –ª–∏—Ü–µ–Ω–∑–∏–∏\n    \"\"\"\n    license = get_object_or_404(License, id=license_id)\n    # –ü—Ä–æ–≤–µ—Ä—è–µ–º –∏ –æ–±–Ω–æ–≤–ª—è–µ–º —Å—Ç–∞—Ç—É—Å, –µ—Å–ª–∏ —Å—Ä–æ–∫ –∏—Å—Ç–µ–∫\n    license.update_status_if_expired()\n    documents = license.documents.all()\n    \n    data = {\n        'id': license.id,\n        'license_number': license.license_number,\n        'license_type': license.license_type,\n        'owner': license.owner,\n        'latitude': float(license.latitude) if license.latitude else None,\n        'longitude': float(license.longitude) if license.longitude else None,\n        'polygon_data': license.polygon_data,\n        'region': license.region,\n        'area': license.area,\n        'issue_date': license.issue_date.strftime('%Y-%m-%d'),\n        'expiry_date': license.expiry_date.strftime('%Y-%m-%d') if license.expiry_date else None,\n        'mineral_type': license.mineral_type,\n        'status': license.status,\n        'description': license.description,\n        'documents': [\n            {\n                'id': doc.id,\n                'title': doc.title,\n                'file_type': doc.file_type,\n                'file_url': doc.file.url if doc.file else None,\n                'uploaded_at': doc.uploaded_at.strftime('%Y-%m-%d %H:%M'),\n            }\n            for doc in documents\n        ]\n    }\n    \n    return JsonResponse(data)\n\n\n@login_required\ndef upload_document(request, license_id):\n    \"\"\"\n    –ó–∞–≥—Ä—É–∑–∫–∞ –¥–æ–∫—É–º–µ–Ω—Ç–∞ –¥–ª—è –ª–∏—Ü–µ–Ω–∑–∏–∏\n    \"\"\"\n    if request.method == 'POST':\n        license = get_object_or_404(License, id=license_id)\n        \n        if 'file' not in request.FILES:\n            return JsonResponse({'error': '–§–∞–π–ª –Ω–µ –Ω–∞–π–¥–µ–Ω'}, status=400)\n        \n        file = request.FILES['file']\n        title = request.POST.get('title', file.name)\n        file_type = request.POST.get('file_type', 'other')\n        \n        document = Document.objects.create(\n            license=license,\n            title=title,\n            file=file,\n            file_type=file_type,\n            uploaded_by=request.user\n        )\n        \n        return JsonResponse({\n            'success': True,\n            'document_id': document.id,\n            'message': '–î–æ–∫—É–º–µ–Ω—Ç —É—Å–ø–µ—à–Ω–æ –∑–∞–≥—Ä—É–∂–µ–Ω'\n        })\n    \n    return JsonResponse({'error': '–ú–µ—Ç–æ–¥ –Ω–µ –ø–æ–¥–¥–µ—Ä–∂–∏–≤–∞–µ—Ç—Å—è'}, status=405)\n\n\ndef download_document(request, document_id):\n    \"\"\"\n    –°–∫–∞—á–∏–≤–∞–Ω–∏–µ –¥–æ–∫—É–º–µ–Ω—Ç–∞\n    \"\"\"\n    import mimetypes\n    import os\n    from urllib.parse import quote\n\n    document = get_object_or_404(Document, id=document_id)\n    \n    if document.file:\n        # –ü–æ–ª—É—á–∞–µ–º –æ—Ä–∏–≥–∏–Ω–∞–ª—å–Ω–æ–µ –∏–º—è —Ñ–∞–π–ª–∞\n        filename = os.path.basename(document.file.name)\n        \n        # –û–ø—Ä–µ–¥–µ–ª—è–µ–º MIME-—Ç–∏–ø –ø–æ —Ä–∞—Å—à–∏—Ä–µ–Ω–∏—é —Ñ–∞–π–ª–∞\n        content_type, _ = mimetypes.guess_type(filename)  \n        if not content_type:\n            content_type = 'application/octet-stream'\n        \n        # –û—Ç–∫—Ä—ã–≤–∞–µ–º —Ñ–∞–π–ª –≤ –±–∏–Ω–∞—Ä–Ω–æ–º —Ä–µ–∂–∏–º–µ\n        file = document.file.open('rb')\n        \n        response = FileResponse(file, content_type=content_type)\n        \n        # –ü—Ä–∞–≤–∏–ª—å–Ω–æ–µ —Ñ–æ—Ä–º–∏—Ä–æ–≤–∞–Ω–∏–µ Content-Disposition –¥–ª—è –ø–æ–¥–¥–µ—Ä–∂–∫–∏ –∫–∏—Ä–∏–ª–ª–∏—Ü—ã\n        # –ò—Å–ø–æ–ª—å–∑—É–µ–º —Ç–æ–ª—å–∫–æ –æ–¥–∏–Ω –≤–∞—Ä–∏–∞–Ω—Ç (filename* –¥–ª—è Unicode)\n        encoded_filename = quote(filename.encode('utf-8'))\n        response['Content-Disposition'] = f\"attachment; filename*=UTF-8''{encoded_filename}\"\n        \n        return response\n    \n    return HttpResponse('–§–∞–π–ª –Ω–µ –Ω–∞–π–¥–µ–Ω', status=404)\n\n\ndef login_view(request):\n    \"\"\"\n    –ó–ê–ì–õ–£–®–ö–ê: –§–æ—Ä–º–∞ –≤—Ö–æ–¥–∞ (–¥–ª—è –±—É–¥—É—â–µ–π LDAP –∏–Ω—Ç–µ–≥—Ä–∞—Ü–∏–∏)\n    \"\"\"\n    if request.method == 'POST':\n        username = request.POST.get('username')\n        password = request.POST.get('password')\n        \n        user = authenticate(request, username=username, password=password)\n        \n        if user is not None:\n            login(request, user)\n            return redirect('map')\n        else:\n            return render(request, 'licenses/login.html', {\n                'error': '–ù–µ–≤–µ—Ä–Ω—ã–π –ª–æ–≥–∏–Ω –∏–ª–∏ –ø–∞—Ä–æ–ª—å'\n            })\n    \n    return render(request, 'licenses/login.html')\n\n\ndef logout_view(request):\n    \"\"\"\n    –í—ã—Ö–æ–¥ –∏–∑ —Å–∏—Å—Ç–µ–º—ã\n    \"\"\"\n    logout(request)\n    return redirect('login')","size_bytes":6490},"licenses/tests.py":{"content":"from django.test import TestCase\n\n# Create your tests here.\n","size_bytes":60},"mineral_licenses/urls.py":{"content":"\"\"\"\nURL configuration for mineral_licenses project.\n\nThe `urlpatterns` list routes URLs to views. For more information please see:\n    https://docs.djangoproject.com/en/5.2/topics/http/urls/\nExamples:\nFunction views\n    1. Add an import:  from my_app import views\n    2. Add a URL to urlpatterns:  path('', views.home, name='home')\nClass-based views\n    1. Add an import:  from other_app.views import Home\n    2. Add a URL to urlpatterns:  path('', Home.as_view(), name='home')\nIncluding another URLconf\n    1. Import the include() function: from django.urls import include, path\n    2. Add a URL to urlpatterns:  path('blog/', include('blog.urls'))\n\"\"\"\nfrom django.contrib import admin\nfrom django.urls import path, include\nfrom django.conf import settings\nfrom django.conf.urls.static import static\n\nurlpatterns = [\n    path('admin/', admin.site.urls),\n    path('', include('licenses.urls')),\n]\n\nif settings.DEBUG:\n    urlpatterns += static(settings.MEDIA_URL, document_root=settings.MEDIA_ROOT)\n    urlpatterns += static(settings.STATIC_URL, document_root=settings.STATIC_ROOT)\n","size_bytes":1081},"create_test_data.py":{"content":"import os\nimport django\n\nos.environ.setdefault('DJANGO_SETTINGS_MODULE', 'mineral_licenses.settings')\ndjango.setup()\n\nfrom licenses.models import License\nfrom datetime import date, timedelta\n\ndef create_test_licenses():\n    test_licenses = [\n        {\n            'license_number': '–ú–°–ö-12345-–ù–ï',\n            'license_type': '–ì–µ–æ–ª–æ–≥–∏—á–µ—Å–∫–æ–µ –∏–∑—É—á–µ–Ω–∏–µ',\n            'owner': '–û–û–û \"–ì–µ–æ–†–µ—Å—É—Ä—Å\"',\n            'latitude': 55.7558,\n            'longitude': 37.6173,\n            'region': '–ú–æ—Å–∫–æ–≤—Å–∫–∞—è –æ–±–ª–∞—Å—Ç—å',\n            'area': '–£—á–∞—Å—Ç–æ–∫ ‚Ññ1, –ú–æ—Å–∫–æ–≤—Å–∫–∞—è –æ–±–ª–∞—Å—Ç—å',\n            'issue_date': date(2023, 1, 15),\n            'expiry_date': date(2028, 1, 15),\n            'mineral_type': '–ù–µ—Ñ—Ç—å',\n            'status': 'active',\n            'description': '–õ–∏—Ü–µ–Ω–∑–∏—è –Ω–∞ –≥–µ–æ–ª–æ–≥–∏—á–µ—Å–∫–æ–µ –∏–∑—É—á–µ–Ω–∏–µ —Å —Ü–µ–ª—å—é –ø–æ–∏—Å–∫–∞ –∏ –æ—Ü–µ–Ω–∫–∏ –Ω–µ—Ñ—Ç–∏ –≤ –ú–æ—Å–∫–æ–≤—Å–∫–æ–π –æ–±–ª–∞—Å—Ç–∏.'\n        },\n        {\n            'license_number': '–¢–Æ–ú-67890-–î–≠',\n            'license_type': '–î–æ–±—ã—á–∞ –ø–æ–ª–µ–∑–Ω—ã—Ö –∏—Å–∫–æ–ø–∞–µ–º—ã—Ö',\n            'owner': '–ü–ê–û \"–°–∏–±–∏—Ä—å–ù–µ—Ñ—Ç—å\"',\n            'latitude': 57.1531,\n            'longitude': 65.5343,\n            'region': '–¢—é–º–µ–Ω—Å–∫–∞—è –æ–±–ª–∞—Å—Ç—å',\n            'area': '–ó–∞–ø–∞–¥–Ω–æ-–°–∏–±–∏—Ä—Å–∫–∏–π —É—á–∞—Å—Ç–æ–∫',\n            'issue_date': date(2020, 5, 10),\n            'expiry_date': date(2040, 5, 10),\n            'mineral_type': '–ü—Ä–∏—Ä–æ–¥–Ω—ã–π –≥–∞–∑',\n            'status': 'active',\n            'description': '–õ–∏—Ü–µ–Ω–∑–∏—è –Ω–∞ –¥–æ–±—ã—á—É –ø—Ä–∏—Ä–æ–¥–Ω–æ–≥–æ –≥–∞–∑–∞ –≤ –ó–∞–ø–∞–¥–Ω–æ–π –°–∏–±–∏—Ä–∏.'\n        },\n        {\n            'license_number': '–ö–†–°-24680-–ù–ï',\n            'license_type': '–ì–µ–æ–ª–æ–≥–∏—á–µ—Å–∫–æ–µ –∏–∑—É—á–µ–Ω–∏–µ',\n            'owner': '–ê–û \"–ö—Ä–∞—Å–Ω–æ—è—Ä—Å–∫–≥–µ–æ–ª–æ–≥–∏—è\"',\n            'latitude': 56.0090,\n            'longitude': 92.8725,\n            'region': '–ö—Ä–∞—Å–Ω–æ—è—Ä—Å–∫–∏–π –∫—Ä–∞–π',\n            'area': '–ï–Ω–∏—Å–µ–π—Å–∫–∏–π —É—á–∞—Å—Ç–æ–∫',\n            'issue_date': date(2022, 3, 20),\n            'expiry_date': date(2027, 3, 20),\n            'mineral_type': '–£–≥–æ–ª—å',\n            'status': 'active',\n            'description': '–õ–∏—Ü–µ–Ω–∑–∏—è –Ω–∞ –≥–µ–æ–ª–æ–≥–∏—á–µ—Å–∫–æ–µ –∏–∑—É—á–µ–Ω–∏–µ —É–≥–æ–ª—å–Ω—ã—Ö –º–µ—Å—Ç–æ—Ä–æ–∂–¥–µ–Ω–∏–π.'\n        },\n        {\n            'license_number': '–°–í–†-13579-–î–≠',\n            'license_type': '–î–æ–±—ã—á–∞ –ø–æ–ª–µ–∑–Ω—ã—Ö –∏—Å–∫–æ–ø–∞–µ–º—ã—Ö',\n            'owner': '–û–û–û \"–°–µ–≤–µ—Ä–Ω—ã–µ –º–∏–Ω–µ—Ä–∞–ª—ã\"',\n            'latitude': 67.5558,\n            'longitude': 33.3974,\n            'region': '–ú—É—Ä–º–∞–Ω—Å–∫–∞—è –æ–±–ª–∞—Å—Ç—å',\n            'area': '–ö–æ–ª—å—Å–∫–∏–π —É—á–∞—Å—Ç–æ–∫',\n            'issue_date': date(2021, 8, 15),\n            'expiry_date': date(2031, 8, 15),\n            'mineral_type': '–ê–ø–∞—Ç–∏—Ç—ã',\n            'status': 'active',\n            'description': '–õ–∏—Ü–µ–Ω–∑–∏—è –Ω–∞ –¥–æ–±—ã—á—É –∞–ø–∞—Ç–∏—Ç–æ–≤ –Ω–∞ –ö–æ–ª—å—Å–∫–æ–º –ø–æ–ª—É–æ—Å—Ç—Ä–æ–≤–µ.'\n        },\n        {\n            'license_number': '–Ø–ö–£-98765-–ù–ï',\n            'license_type': '–ì–µ–æ–ª–æ–≥–∏—á–µ—Å–∫–æ–µ –∏–∑—É—á–µ–Ω–∏–µ',\n            'owner': '–ó–ê–û \"–Ø–∫—É—Ç—Å–∫–∏–µ –∞–ª–º–∞–∑—ã\"',\n            'latitude': 62.0339,\n            'longitude': 129.7422,\n            'region': '–†–µ—Å–ø—É–±–ª–∏–∫–∞ –°–∞—Ö–∞ (–Ø–∫—É—Ç–∏—è)',\n            'area': '–í–∏–ª—é–π—Å–∫–∏–π —É—á–∞—Å—Ç–æ–∫',\n            'issue_date': date(2019, 11, 1),\n            'expiry_date': date(2024, 11, 1),\n            'mineral_type': '–ê–ª–º–∞–∑—ã',\n            'status': 'suspended',\n            'description': '–õ–∏—Ü–µ–Ω–∑–∏—è –Ω–∞ –≥–µ–æ–ª–æ–≥–∏—á–µ—Å–∫–æ–µ –∏–∑—É—á–µ–Ω–∏–µ –∞–ª–º–∞–∑–Ω—ã—Ö –º–µ—Å—Ç–æ—Ä–æ–∂–¥–µ–Ω–∏–π (–ø—Ä–∏–æ—Å—Ç–∞–Ω–æ–≤–ª–µ–Ω–∞).'\n        },\n        {\n            'license_number': '–£–†–õ-11223-–î–≠',\n            'license_type': '–î–æ–±—ã—á–∞ –ø–æ–ª–µ–∑–Ω—ã—Ö –∏—Å–∫–æ–ø–∞–µ–º—ã—Ö',\n            'owner': '–ü–ê–û \"–£—Ä–∞–ª–†—É–¥–∞\"',\n            'latitude': 56.8389,\n            'longitude': 60.6057,\n            'region': '–°–≤–µ—Ä–¥–ª–æ–≤—Å–∫–∞—è –æ–±–ª–∞—Å—Ç—å',\n            'area': '–£—Ä–∞–ª—å—Å–∫–∏–π —É—á–∞—Å—Ç–æ–∫',\n            'issue_date': date(2018, 2, 25),\n            'expiry_date': date(2023, 2, 25),\n            'mineral_type': '–ñ–µ–ª–µ–∑–Ω–∞—è —Ä—É–¥–∞',\n            'status': 'expired',\n            'description': '–õ–∏—Ü–µ–Ω–∑–∏—è –Ω–∞ –¥–æ–±—ã—á—É –∂–µ–ª–µ–∑–Ω–æ–π —Ä—É–¥—ã (–∏—Å—Ç–µ–∫–ª–∞).'\n        },\n    ]\n    \n    for license_data in test_licenses:\n        License.objects.get_or_create(\n            license_number=license_data['license_number'],\n            defaults=license_data\n        )\n    \n    print(f\"–°–æ–∑–¥–∞–Ω–æ {len(test_licenses)} —Ç–µ—Å—Ç–æ–≤—ã—Ö –ª–∏—Ü–µ–Ω–∑–∏–π\")\n\nif __name__ == '__main__':\n    create_test_licenses()\n    print(\"–¢–µ—Å—Ç–æ–≤—ã–µ –¥–∞–Ω–Ω—ã–µ —É—Å–ø–µ—à–Ω–æ —Å–æ–∑–¥–∞–Ω—ã!\")\n","size_bytes":4962},"replit.md":{"content":"# –ë–∞–∑–∞ –ª–∏—Ü–µ–Ω–∑–∏–π –Ω–∞ –Ω–µ–¥—Ä–æ–ø–æ–ª—å–∑–æ–≤–∞–Ω–∏–µ\n\n## –û–ø–∏—Å–∞–Ω–∏–µ –ø—Ä–æ–µ–∫—Ç–∞\n\n–í–µ–±-–ø—Ä–∏–ª–æ–∂–µ–Ω–∏–µ –Ω–∞ Django –¥–ª—è —É–ø—Ä–∞–≤–ª–µ–Ω–∏—è –±–∞–∑–æ–π –¥–∞–Ω–Ω—ã—Ö –ª–∏—Ü–µ–Ω–∑–∏–π –Ω–∞ –Ω–µ–¥—Ä–æ–ø–æ–ª—å–∑–æ–≤–∞–Ω–∏–µ —Å –∏–Ω—Ç–µ—Ä–∞–∫—Ç–∏–≤–Ω–æ–π –Ø–Ω–¥–µ–∫—Å.–ö–∞—Ä—Ç–æ–π.\n\n## –û—Å–Ω–æ–≤–Ω–æ–π —Ñ—É–Ω–∫—Ü–∏–æ–Ω–∞–ª\n\n### –†–µ–∞–ª–∏–∑–æ–≤–∞–Ω–Ω—ã–µ —Ñ—É–Ω–∫—Ü–∏–∏\n- ‚úÖ –ò–Ω—Ç–µ—Ä–∞–∫—Ç–∏–≤–Ω–∞—è –Ø–Ω–¥–µ–∫—Å.–ö–∞—Ä—Ç–∞ —Å –æ—Ç–æ–±—Ä–∞–∂–µ–Ω–∏–µ–º –ª–∏—Ü–µ–Ω–∑–∏–π (40% —ç–∫—Ä–∞–Ω–∞ —Å–ª–µ–≤–∞)\n- ‚úÖ –ü—Ä–æ—Å–º–æ—Ç—Ä –∏–Ω—Ñ–æ—Ä–º–∞—Ü–∏–∏ –æ –ª–∏—Ü–µ–Ω–∑–∏—è—Ö –ø—Ä–∏ –∫–ª–∏–∫–µ –Ω–∞ –º–∞—Ä–∫–µ—Ä—ã\n- ‚úÖ –ú–æ–¥–∞–ª—å–Ω—ã–µ –æ–∫–Ω–∞ —Å –¥–µ—Ç–∞–ª—å–Ω–æ–π –∏–Ω—Ñ–æ—Ä–º–∞—Ü–∏–µ–π –æ –ª–∏—Ü–µ–Ω–∑–∏–∏\n- ‚úÖ –§—É–Ω–∫—Ü–∏–æ–Ω–∞–ª –∑–∞–≥—Ä—É–∑–∫–∏ –∏ —Å–∫–∞—á–∏–≤–∞–Ω–∏—è –¥–æ–∫—É–º–µ–Ω—Ç–æ–≤\n- ‚úÖ **–§–∏–ª—å—Ç—Ä–∞—Ü–∏—è –ª–∏—Ü–µ–Ω–∑–∏–π** –ø–æ —Å—Ç–∞—Ç—É—Å—É, —Ä–µ–≥–∏–æ–Ω—É, —Ç–∏–ø—É, –ø–æ–ª–µ–∑–Ω–æ–º—É –∏—Å–∫–æ–ø–∞–µ–º–æ–º—É\n- ‚úÖ **–¢–µ–∫—Å—Ç–æ–≤—ã–π –ø–æ–∏—Å–∫** –ø–æ –Ω–æ–º–µ—Ä—É –ª–∏—Ü–µ–Ω–∑–∏–∏ –∏ –Ω–µ–¥—Ä–æ–ø–æ–ª—å–∑–æ–≤–∞—Ç–µ–ª—é\n- ‚úÖ **–°–ø–∏—Å–æ–∫ –ª–∏—Ü–µ–Ω–∑–∏–π** —Å –∫–∞—Ä—Ç–æ—á–∫–∞–º–∏ –∏ —Å–∏–Ω—Ö—Ä–æ–Ω–∏–∑–∞—Ü–∏–µ–π —Å –∫–∞—Ä—Ç–æ–π\n- ‚úÖ –ê–¥–º–∏–Ω–∏—Å—Ç—Ä–∞—Ç–∏–≤–Ω–∞—è –ø–∞–Ω–µ–ª—å Django –¥–ª—è —É–ø—Ä–∞–≤–ª–µ–Ω–∏—è –¥–∞–Ω–Ω—ã–º–∏\n- ‚úÖ –ê–¥–∞–ø—Ç–∏–≤–Ω—ã–π –∏–Ω—Ç–µ—Ä—Ñ–µ–π—Å —Å —Ä–∞–∑–¥–µ–ª–µ–Ω–∏–µ–º —ç–∫—Ä–∞–Ω–∞ (–∫–∞—Ä—Ç–∞ 40% + –ø–∞–Ω–µ–ª—å —É–ø—Ä–∞–≤–ª–µ–Ω–∏—è 60%)\n- ‚úÖ –ó–∞–≥–ª—É—à–∫–∏ –¥–ª—è LDAP –∞–≤—Ç–æ—Ä–∏–∑–∞—Ü–∏–∏ (–≥–æ—Ç–æ–≤–æ –∫ –∏–Ω—Ç–µ–≥—Ä–∞—Ü–∏–∏)\n- ‚úÖ –ó–∞–≥–ª—É—à–∫–∏ –¥–ª—è –ø–æ–¥–∫–ª—é—á–µ–Ω–∏—è –∫ –≤–Ω–µ—à–Ω–µ–π –ë–î (–≥–æ—Ç–æ–≤–æ –∫ –∏–Ω—Ç–µ–≥—Ä–∞—Ü–∏–∏)\n\n### –ú–æ–¥–µ–ª–∏ –¥–∞–Ω–Ω—ã—Ö\n\n**License (–õ–∏—Ü–µ–Ω–∑–∏—è)**\n- –ù–æ–º–µ—Ä –ª–∏—Ü–µ–Ω–∑–∏–∏ (—É–Ω–∏–∫–∞–ª—å–Ω—ã–π)\n- –í–∏–¥ –ø–æ–ª—å–∑–æ–≤–∞–Ω–∏—è –Ω–µ–¥—Ä–∞–º–∏\n- –ù–µ–¥—Ä–æ–ø–æ–ª—å–∑–æ–≤–∞—Ç–µ–ª—å\n- –ö–æ–æ—Ä–¥–∏–Ω–∞—Ç—ã (—à–∏—Ä–æ—Ç–∞, –¥–æ–ª–≥–æ—Ç–∞) –¥–ª—è –∫–∞—Ä—Ç—ã\n- –†–µ–≥–∏–æ–Ω –∏ —É—á–∞—Å—Ç–æ–∫ –Ω–µ–¥—Ä\n- –î–∞—Ç—ã –≤—ã–¥–∞—á–∏ –∏ –æ–∫–æ–Ω—á–∞–Ω–∏—è\n- –í–∏–¥ –ø–æ–ª–µ–∑–Ω–æ–≥–æ –∏—Å–∫–æ–ø–∞–µ–º–æ–≥–æ\n- –°—Ç–∞—Ç—É—Å (–¥–µ–π—Å—Ç–≤—É—é—â–∞—è, –∏—Å—Ç–µ–∫–ª–∞, –ø—Ä–∏–æ—Å—Ç–∞–Ω–æ–≤–ª–µ–Ω–∞, –ø—Ä–µ–∫—Ä–∞—â–µ–Ω–∞)\n- –û–ø–∏—Å–∞–Ω–∏–µ\n\n**Document (–î–æ–∫—É–º–µ–Ω—Ç)**\n- –°–≤—è–∑—å —Å –ª–∏—Ü–µ–Ω–∑–∏–µ–π\n- –ù–∞–∑–≤–∞–Ω–∏–µ –¥–æ–∫—É–º–µ–Ω—Ç–∞\n- –§–∞–π–ª\n- –¢–∏–ø –¥–æ–∫—É–º–µ–Ω—Ç–∞ (–ª–∏—Ü–µ–Ω–∑–∏—è, –æ—Ç—á–µ—Ç, –∫–∞—Ä—Ç–∞, –ø—Ä–æ—á–µ–µ)\n- –î–∞—Ç–∞ –∑–∞–≥—Ä—É–∑–∫–∏ –∏ –ø–æ–ª—å–∑–æ–≤–∞—Ç–µ–ª—å\n\n## –°—Ç—Ä—É–∫—Ç—É—Ä–∞ –ø—Ä–æ–µ–∫—Ç–∞\n\n```\n.\n‚îú‚îÄ‚îÄ mineral_licenses/       # –û—Å–Ω–æ–≤–Ω–æ–π –ø—Ä–æ–µ–∫—Ç Django\n‚îÇ   ‚îú‚îÄ‚îÄ settings.py        # –ù–∞—Å—Ç—Ä–æ–π–∫–∏ –ø—Ä–æ–µ–∫—Ç–∞\n‚îÇ   ‚îú‚îÄ‚îÄ urls.py           # –ì–ª–∞–≤–Ω—ã–π URL –∫–æ–Ω—Ñ–∏–≥—É—Ä–∞—Ç–æ—Ä\n‚îÇ   ‚îî‚îÄ‚îÄ wsgi.py           # WSGI –∫–æ–Ω—Ñ–∏–≥—É—Ä–∞—Ü–∏—è\n‚îú‚îÄ‚îÄ licenses/             # –ü—Ä–∏–ª–æ–∂–µ–Ω–∏–µ –¥–ª—è —É–ø—Ä–∞–≤–ª–µ–Ω–∏—è –ª–∏—Ü–µ–Ω–∑–∏—è–º–∏\n‚îÇ   ‚îú‚îÄ‚îÄ models.py         # –ú–æ–¥–µ–ª–∏ –¥–∞–Ω–Ω—ã—Ö\n‚îÇ   ‚îú‚îÄ‚îÄ views.py          # –ü—Ä–µ–¥—Å—Ç–∞–≤–ª–µ–Ω–∏—è (views)\n‚îÇ   ‚îú‚îÄ‚îÄ urls.py           # URL –º–∞—Ä—à—Ä—É—Ç—ã\n‚îÇ   ‚îú‚îÄ‚îÄ admin.py          # –ù–∞—Å—Ç—Ä–æ–π–∫–∏ –∞–¥–º–∏–Ω-–ø–∞–Ω–µ–ª–∏\n‚îÇ   ‚îú‚îÄ‚îÄ templates/        # HTML —à–∞–±–ª–æ–Ω—ã\n‚îÇ   ‚îÇ   ‚îî‚îÄ‚îÄ licenses/\n‚îÇ   ‚îÇ       ‚îú‚îÄ‚îÄ base.html     # –ë–∞–∑–æ–≤—ã–π —à–∞–±–ª–æ–Ω\n‚îÇ   ‚îÇ       ‚îú‚îÄ‚îÄ map.html      # –®–∞–±–ª–æ–Ω —Å –∫–∞—Ä—Ç–æ–π\n‚îÇ   ‚îÇ       ‚îî‚îÄ‚îÄ login.html    # –§–æ—Ä–º–∞ –≤—Ö–æ–¥–∞\n‚îÇ   ‚îî‚îÄ‚îÄ migrations/       # –ú–∏–≥—Ä–∞—Ü–∏–∏ –ë–î\n‚îú‚îÄ‚îÄ media/               # –ó–∞–≥—Ä—É–∂–µ–Ω–Ω—ã–µ –¥–æ–∫—É–º–µ–Ω—Ç—ã\n‚îú‚îÄ‚îÄ create_test_data.py  # –°–∫—Ä–∏–ø—Ç –¥–ª—è —Å–æ–∑–¥–∞–Ω–∏—è —Ç–µ—Å—Ç–æ–≤—ã—Ö –¥–∞–Ω–Ω—ã—Ö\n‚îî‚îÄ‚îÄ manage.py           # Django management –∫–æ–º–∞–Ω–¥—ã\n```\n\n## –ù–∞—Å—Ç—Ä–æ–π–∫–∞ –∏ –∑–∞–ø—É—Å–∫\n\n### 1. –ù–∞—Å—Ç—Ä–æ–π–∫–∞ –Ø–Ω–¥–µ–∫—Å.–ö–∞—Ä—Ç API\n\n**–í–ê–ñ–ù–û:** –î–ª—è —Ä–∞–±–æ—Ç—ã –∏–Ω—Ç–µ—Ä–∞–∫—Ç–∏–≤–Ω–æ–π –∫–∞—Ä—Ç—ã –Ω–µ–æ–±—Ö–æ–¥–∏–º API –∫–ª—é—á –Ø–Ω–¥–µ–∫—Å.–ö–∞—Ä—Ç.\n\n1. –ü–æ–ª—É—á–∏—Ç–µ –±–µ—Å–ø–ª–∞—Ç–Ω—ã–π API –∫–ª—é—á:\n   - –ü–µ—Ä–µ–π–¥–∏—Ç–µ –Ω–∞ https://developer.tech.yandex.ru/\n   - –ó–∞—Ä–µ–≥–∏—Å—Ç—Ä–∏—Ä—É–π—Ç–µ—Å—å –∏–ª–∏ –≤–æ–π–¥–∏—Ç–µ\n   - –í—ã–±–µ—Ä–∏—Ç–µ \"JavaScript API –∏ HTTP –ì–µ–æ–∫–æ–¥–µ—Ä\"\n   - –°–æ–∑–¥–∞–π—Ç–µ –Ω–æ–≤—ã–π –∫–ª—é—á\n\n2. –ù–∞—Å—Ç—Ä–æ–π—Ç–µ –ø–µ—Ä–µ–º–µ–Ω–Ω—É—é –æ–∫—Ä—É–∂–µ–Ω–∏—è:\n   - –°–∫–æ–ø–∏—Ä—É–π—Ç–µ `.env.example` –≤ `.env`\n   - –í—Å—Ç–∞–≤—å—Ç–µ –≤–∞—à API –∫–ª—é—á –≤ `YANDEX_MAPS_API_KEY`\n\n### 2. –°–æ–∑–¥–∞–Ω–∏–µ —Å—É–ø–µ—Ä–ø–æ–ª—å–∑–æ–≤–∞—Ç–µ–ª—è\n\n–î–ª—è –¥–æ—Å—Ç—É–ø–∞ –∫ –∞–¥–º–∏–Ω-–ø–∞–Ω–µ–ª–∏ —Å–æ–∑–¥–∞–π—Ç–µ —Å—É–ø–µ—Ä–ø–æ–ª—å–∑–æ–≤–∞—Ç–µ–ª—è:\n\n```bash\npython manage.py createsuperuser\n```\n\n### 3. –î–æ—Å—Ç—É–ø –∫ –ø—Ä–∏–ª–æ–∂–µ–Ω–∏—é\n\n- **–ì–ª–∞–≤–Ω–∞—è —Å—Ç—Ä–∞–Ω–∏—Ü–∞ —Å –∫–∞—Ä—Ç–æ–π:** https://–≤–∞—à-replit-–¥–æ–º–µ–Ω.repl.co/\n- **–ê–¥–º–∏–Ω-–ø–∞–Ω–µ–ª—å:** https://–≤–∞—à-replit-–¥–æ–º–µ–Ω.repl.co/admin/\n- **API –ª–∏—Ü–µ–Ω–∑–∏–π:** https://–≤–∞—à-replit-–¥–æ–º–µ–Ω.repl.co/api/licenses/\n\n## –ó–∞–≥–ª—É—à–∫–∏ –¥–ª—è –±—É–¥—É—â–µ–π –∏–Ω—Ç–µ–≥—Ä–∞—Ü–∏–∏\n\n### LDAP –∞–≤—Ç–æ—Ä–∏–∑–∞—Ü–∏—è\n\n–í —Ñ–∞–π–ª–µ `mineral_licenses/settings.py` –Ω–∞—Ö–æ–¥—è—Ç—Å—è –∑–∞–∫–æ–º–º–µ–Ω—Ç–∏—Ä–æ–≤–∞–Ω–Ω—ã–µ –Ω–∞—Å—Ç—Ä–æ–π–∫–∏ –¥–ª—è LDAP:\n\n```python\n# AUTHENTICATION_BACKENDS = [\n#     'django_auth_ldap.backend.LDAPBackend',\n#     'django.contrib.auth.backends.ModelBackend',\n# ]\n```\n\n**–î–ª—è –∞–∫—Ç–∏–≤–∞—Ü–∏–∏:**\n1. –£—Å—Ç–∞–Ω–æ–≤–∏—Ç–µ `django-auth-ldap`: `pip install django-auth-ldap`\n2. –†–∞—Å–∫–æ–º–º–µ–Ω—Ç–∏—Ä—É–π—Ç–µ —Å–µ–∫—Ü–∏—é LDAP –≤ settings.py\n3. –ù–∞—Å—Ç—Ä–æ–π—Ç–µ –ø–∞—Ä–∞–º–µ—Ç—Ä—ã –ø–æ–¥–∫–ª—é—á–µ–Ω–∏—è –∫ –≤–∞—à–µ–º—É LDAP —Å–µ—Ä–≤–µ—Ä—É\n4. –î–æ–±–∞–≤—å—Ç–µ –Ω–∞—Å—Ç—Ä–æ–π–∫–∏ –≤ `.env` —Ñ–∞–π–ª\n\n### –í–Ω–µ—à–Ω—è—è –±–∞–∑–∞ –¥–∞–Ω–Ω—ã—Ö\n\n–í settings.py –µ—Å—Ç—å –∑–∞–∫–æ–º–º–µ–Ω—Ç–∏—Ä–æ–≤–∞–Ω–Ω–∞—è –∫–æ–Ω—Ñ–∏–≥—É—Ä–∞—Ü–∏—è –¥–ª—è PostgreSQL:\n\n```python\n# DATABASES = {\n#     'default': {\n#         'ENGINE': 'django.db.backends.postgresql',\n#         ...\n#     }\n# }\n```\n\n**–î–ª—è –∞–∫—Ç–∏–≤–∞—Ü–∏–∏:**\n1. –£—Å—Ç–∞–Ω–æ–≤–∏—Ç–µ `psycopg2-binary`: `pip install psycopg2-binary`\n2. –†–∞—Å–∫–æ–º–º–µ–Ω—Ç–∏—Ä—É–π—Ç–µ —Å–µ–∫—Ü–∏—é DATABASES –≤ settings.py\n3. –ù–∞—Å—Ç—Ä–æ–π—Ç–µ –ø–∞—Ä–∞–º–µ—Ç—Ä—ã –ø–æ–¥–∫–ª—é—á–µ–Ω–∏—è\n4. –î–æ–±–∞–≤—å—Ç–µ –Ω–∞—Å—Ç—Ä–æ–π–∫–∏ –≤ `.env` —Ñ–∞–π–ª\n5. –í—ã–ø–æ–ª–Ω–∏—Ç–µ –º–∏–≥—Ä–∞—Ü–∏–∏: `python manage.py migrate`\n\n## API Endpoints\n\n### GET /api/licenses/\n–ü–æ–ª—É—á–µ–Ω–∏–µ —Å–ø–∏—Å–∫–∞ –≤—Å–µ—Ö –ª–∏—Ü–µ–Ω–∑–∏–π –≤ —Ñ–æ—Ä–º–∞—Ç–µ JSON\n\n### GET /api/licenses/<id>/\n–ü–æ–ª—É—á–µ–Ω–∏–µ –¥–µ—Ç–∞–ª—å–Ω–æ–π –∏–Ω—Ñ–æ—Ä–º–∞—Ü–∏–∏ –æ –ª–∏—Ü–µ–Ω–∑–∏–∏\n\n### POST /api/licenses/<id>/upload/\n–ó–∞–≥—Ä—É–∑–∫–∞ –¥–æ–∫—É–º–µ–Ω—Ç–∞ –¥–ª—è –ª–∏—Ü–µ–Ω–∑–∏–∏ (—Ç—Ä–µ–±—É–µ—Ç—Å—è –∞–≤—Ç–æ—Ä–∏–∑–∞—Ü–∏—è)\n\n### GET /api/documents/<id>/download/\n–°–∫–∞—á–∏–≤–∞–Ω–∏–µ –¥–æ–∫—É–º–µ–Ω—Ç–∞\n\n## –¢–µ—Å—Ç–æ–≤—ã–µ –¥–∞–Ω–Ω—ã–µ\n\n–ü—Ä–æ–µ–∫—Ç —Å–æ–¥–µ—Ä–∂–∏—Ç —Ç–µ—Å—Ç–æ–≤—ã–µ –¥–∞–Ω–Ω—ã–µ –æ –ª–∏—Ü–µ–Ω–∑–∏—è—Ö –¥–ª—è –¥–µ–º–æ–Ω—Å—Ç—Ä–∞—Ü–∏–∏:\n- 6 –ª–∏—Ü–µ–Ω–∑–∏–π –∏–∑ —Ä–∞–∑–Ω—ã—Ö —Ä–µ–≥–∏–æ–Ω–æ–≤ –†–æ—Å—Å–∏–∏\n- –†–∞–∑–Ω—ã–µ —Ç–∏–ø—ã –ª–∏—Ü–µ–Ω–∑–∏–π –∏ –ø–æ–ª–µ–∑–Ω—ã—Ö –∏—Å–∫–æ–ø–∞–µ–º—ã—Ö\n- –†–∞–∑–ª–∏—á–Ω—ã–µ —Å—Ç–∞—Ç—É—Å—ã (–¥–µ–π—Å—Ç–≤—É—é—â–∏–µ, –ø—Ä–∏–æ—Å—Ç–∞–Ω–æ–≤–ª–µ–Ω–Ω—ã–µ, –∏—Å—Ç–µ–∫—à–∏–µ)\n\n## –¢–µ—Ö–Ω–æ–ª–æ–≥–∏–∏\n\n- **Backend:** Django 5.2.7\n- **Frontend:** Bootstrap 5, Vanilla JavaScript\n- **–ö–∞—Ä—Ç—ã:** –Ø–Ω–¥–µ–∫—Å.–ö–∞—Ä—Ç—ã JavaScript API 2.1\n- **–ë–î:** SQLite (—Ä–∞–∑—Ä–∞–±–æ—Ç–∫–∞), PostgreSQL (–≥–æ—Ç–æ–≤–æ –∫ –ø—Ä–æ–¥–∞–∫—à–Ω)\n- **–ê–≤—Ç–æ—Ä–∏–∑–∞—Ü–∏—è:** Django Auth (—Ç–µ–∫—É—â–∞—è), LDAP (–≥–æ—Ç–æ–≤–æ –∫ –∏–Ω—Ç–µ–≥—Ä–∞—Ü–∏–∏)\n\n## –î–æ–ø–æ–ª–Ω–∏—Ç–µ–ª—å–Ω—ã–µ –∫–æ–º–∞–Ω–¥—ã\n\n### –°–æ–∑–¥–∞–Ω–∏–µ —Ç–µ—Å—Ç–æ–≤—ã—Ö –¥–∞–Ω–Ω—ã—Ö\n```bash\npython create_test_data.py\n```\n\n### –°–æ–∑–¥–∞–Ω–∏–µ –º–∏–≥—Ä–∞—Ü–∏–π\n```bash\npython manage.py makemigrations\npython manage.py migrate\n```\n\n### –ó–∞–ø—É—Å–∫ —Å–µ—Ä–≤–µ—Ä–∞\n```bash\npython manage.py runserver 0.0.0.0:5000\n```\n\n## –î–∞—Ç–∞ —Å–æ–∑–¥–∞–Ω–∏—è\n16 –æ–∫—Ç—è–±—Ä—è 2025\n\n## –ü–æ—Å–ª–µ–¥–Ω–∏–µ –∏–∑–º–µ–Ω–µ–Ω–∏—è\n- 16.10.2025: –°–æ–∑–¥–∞–Ω–∏–µ –±–∞–∑–æ–≤–æ–π —Å—Ç—Ä—É–∫—Ç—É—Ä—ã –ø—Ä–æ–µ–∫—Ç–∞\n- 16.10.2025: –†–µ–∞–ª–∏–∑–∞—Ü–∏—è –∏–Ω—Ç–µ–≥—Ä–∞—Ü–∏–∏ —Å –Ø–Ω–¥–µ–∫—Å.–ö–∞—Ä—Ç–∞–º–∏\n- 16.10.2025: –î–æ–±–∞–≤–ª–µ–Ω–∏–µ —Ñ—É–Ω–∫—Ü–∏–æ–Ω–∞–ª–∞ –∑–∞–≥—Ä—É–∑–∫–∏/—Å–∫–∞—á–∏–≤–∞–Ω–∏—è –¥–æ–∫—É–º–µ–Ω—Ç–æ–≤\n- 16.10.2025: –ù–∞—Å—Ç—Ä–æ–π–∫–∞ –∑–∞–≥–ª—É—à–µ–∫ –¥–ª—è LDAP –∏ –ë–î\n","size_bytes":8300},"mineral_licenses/__init__.py":{"content":"","size_bytes":0},"pyproject.toml":{"content":"[project]\nname = \"repl-nix-workspace\"\nversion = \"0.1.0\"\ndescription = \"Add your description here\"\nrequires-python = \">=3.11\"\ndependencies = [\n    \"django>=5.2.7\",\n    \"django-cors-headers>=4.9.0\",\n    \"pillow>=12.0.0\",\n    \"python-dotenv>=1.1.1\",\n    \"psycopg2-binary>=2.9.0\",\n]\n","size_bytes":279},"README.md":{"content":"# –ë–∞–∑–∞ –ª–∏—Ü–µ–Ω–∑–∏–π –Ω–∞ –Ω–µ–¥—Ä–æ–ø–æ–ª—å–∑–æ–≤–∞–Ω–∏–µ\n\n–í–µ–±-–ø—Ä–∏–ª–æ–∂–µ–Ω–∏–µ –Ω–∞ Django –¥–ª—è —É–ø—Ä–∞–≤–ª–µ–Ω–∏—è –±–∞–∑–æ–π –¥–∞–Ω–Ω—ã—Ö –ª–∏—Ü–µ–Ω–∑–∏–π –Ω–∞ –Ω–µ–¥—Ä–æ–ø–æ–ª—å–∑–æ–≤–∞–Ω–∏–µ —Å –∏–Ω—Ç–µ—Ä–∞–∫—Ç–∏–≤–Ω–æ–π –Ø–Ω–¥–µ–∫—Å.–ö–∞—Ä—Ç–æ–π.\n\n## üöÄ –ë—ã—Å—Ç—Ä—ã–π —Å—Ç–∞—Ä—Ç\n\n### 1. –ù–∞—Å—Ç—Ä–æ–π—Ç–µ API –∫–ª—é—á –Ø–Ω–¥–µ–∫—Å.–ö–∞—Ä—Ç\n\n–î–ª—è —Ä–∞–±–æ—Ç—ã –∏–Ω—Ç–µ—Ä–∞–∫—Ç–∏–≤–Ω–æ–π –∫–∞—Ä—Ç—ã –≤–∞–º –Ω—É–∂–µ–Ω –±–µ—Å–ø–ª–∞—Ç–Ω—ã–π API –∫–ª—é—á:\n\n1. –ü–µ—Ä–µ–π–¥–∏—Ç–µ –Ω–∞ https://developer.tech.yandex.ru/\n2. –ó–∞—Ä–µ–≥–∏—Å—Ç—Ä–∏—Ä—É–π—Ç–µ—Å—å –∏–ª–∏ –≤–æ–π–¥–∏—Ç–µ\n3. –í—ã–±–µ—Ä–∏—Ç–µ \"JavaScript API –∏ HTTP –ì–µ–æ–∫–æ–¥–µ—Ä\"\n4. –°–æ–∑–¥–∞–π—Ç–µ –Ω–æ–≤—ã–π –∫–ª—é—á\n5. –î–æ–±–∞–≤—å—Ç–µ –∫–ª—é—á –≤ –ø–µ—Ä–µ–º–µ–Ω–Ω—ã–µ –æ–∫—Ä—É–∂–µ–Ω–∏—è –≤ Replit:\n   - –ü–µ—Ä–µ–π–¥–∏—Ç–µ –≤ —Ä–∞–∑–¥–µ–ª \"Secrets\" (üîí)\n   - –°–æ–∑–¥–∞–π—Ç–µ –Ω–æ–≤—ã–π —Å–µ–∫—Ä–µ—Ç —Å –∏–º–µ–Ω–µ–º `YANDEX_MAPS_API_KEY`\n   - –í—Å—Ç–∞–≤—å—Ç–µ –≤–∞—à API –∫–ª—é—á\n\n### 2. –°–æ–∑–¥–∞–π—Ç–µ —Å—É–ø–µ—Ä–ø–æ–ª—å–∑–æ–≤–∞—Ç–µ–ª—è\n\n–î–ª—è –¥–æ—Å—Ç—É–ø–∞ –∫ –∞–¥–º–∏–Ω-–ø–∞–Ω–µ–ª–∏ –≤—ã–ø–æ–ª–Ω–∏—Ç–µ:\n\n```bash\npython manage.py createsuperuser\n```\n\n### 3. –ó–∞–ø—É—Å—Ç–∏—Ç–µ –ø—Ä–∏–ª–æ–∂–µ–Ω–∏–µ\n\n–ü—Ä–∏–ª–æ–∂–µ–Ω–∏–µ —É–∂–µ –Ω–∞—Å—Ç—Ä–æ–µ–Ω–æ –∏ –∑–∞–ø—É—â–µ–Ω–æ! –ü—Ä–æ—Å—Ç–æ –æ—Ç–∫—Ä–æ–π—Ç–µ –µ–≥–æ –≤ –±—Ä–∞—É–∑–µ—Ä–µ.\n\n## üìç –û—Å–Ω–æ–≤–Ω—ã–µ –≤–æ–∑–º–æ–∂–Ω–æ—Å—Ç–∏\n\n- **–ò–Ω—Ç–µ—Ä–∞–∫—Ç–∏–≤–Ω–∞—è –∫–∞—Ä—Ç–∞** (40% —ç–∫—Ä–∞–Ω–∞) —Å –º–∞—Ä–∫–µ—Ä–∞–º–∏ –ª–∏—Ü–µ–Ω–∑–∏–π\n- **–§–∏–ª—å—Ç—Ä—ã –ª–∏—Ü–µ–Ω–∑–∏–π** –ø–æ —Å—Ç–∞—Ç—É—Å—É, —Ä–µ–≥–∏–æ–Ω—É, —Ç–∏–ø—É, –ø–æ–ª–µ–∑–Ω–æ–º—É –∏—Å–∫–æ–ø–∞–µ–º–æ–º—É\n- **–¢–µ–∫—Å—Ç–æ–≤—ã–π –ø–æ–∏—Å–∫** –ø–æ –Ω–æ–º–µ—Ä—É –ª–∏—Ü–µ–Ω–∑–∏–∏ –∏ –Ω–µ–¥—Ä–æ–ø–æ–ª—å–∑–æ–≤–∞—Ç–µ–ª—é\n- **–°–ø–∏—Å–æ–∫ –ª–∏—Ü–µ–Ω–∑–∏–π** —Å –∫–∞—Ä—Ç–æ—á–∫–∞–º–∏ (—Å–∏–Ω—Ö—Ä–æ–Ω–∏–∑–∏—Ä–æ–≤–∞–Ω —Å –∫–∞—Ä—Ç–æ–π)\n- **–î–µ—Ç–∞–ª—å–Ω–∞—è –∏–Ω—Ñ–æ—Ä–º–∞—Ü–∏—è** –æ –∫–∞–∂–¥–æ–π –ª–∏—Ü–µ–Ω–∑–∏–∏ –ø—Ä–∏ –∫–ª–∏–∫–µ\n- **–ó–∞–≥—Ä—É–∑–∫–∞ –∏ —Å–∫–∞—á–∏–≤–∞–Ω–∏–µ** –¥–æ–∫—É–º–µ–Ω—Ç–æ–≤\n- **–ê–¥–º–∏–Ω-–ø–∞–Ω–µ–ª—å Django** –¥–ª—è —É–ø—Ä–∞–≤–ª–µ–Ω–∏—è –¥–∞–Ω–Ω—ã–º–∏\n- **API endpoints** –¥–ª—è –∏–Ω—Ç–µ–≥—Ä–∞—Ü–∏–∏\n- **–ì–æ—Ç–æ–≤—ã–µ –∑–∞–≥–ª—É—à–∫–∏** –¥–ª—è LDAP –∞–≤—Ç–æ—Ä–∏–∑–∞—Ü–∏–∏ –∏ –≤–Ω–µ—à–Ω–µ–π –ë–î\n\n## üîó –î–æ—Å—Ç—É–ø –∫ –ø—Ä–∏–ª–æ–∂–µ–Ω–∏—é\n\n- **–ì–ª–∞–≤–Ω–∞—è —Å—Ç—Ä–∞–Ω–∏—Ü–∞ —Å –∫–∞—Ä—Ç–æ–π:** `/`\n- **–ê–¥–º–∏–Ω-–ø–∞–Ω–µ–ª—å:** `/admin/`\n- **API –ª–∏—Ü–µ–Ω–∑–∏–π:** `/api/licenses/`\n\n## üìö –¢–µ—Å—Ç–æ–≤—ã–µ –¥–∞–Ω–Ω—ã–µ\n\n–í –±–∞–∑–µ —É–∂–µ –µ—Å—Ç—å 6 —Ç–µ—Å—Ç–æ–≤—ã—Ö –ª–∏—Ü–µ–Ω–∑–∏–π –∏–∑ —Ä–∞–∑–Ω—ã—Ö —Ä–µ–≥–∏–æ–Ω–æ–≤ –†–æ—Å—Å–∏–∏ –¥–ª—è –¥–µ–º–æ–Ω—Å—Ç—Ä–∞—Ü–∏–∏ —Ñ—É–Ω–∫—Ü–∏–æ–Ω–∞–ª–∞.\n\n## üîß –î–ª—è —Ä–∞–∑—Ä–∞–±–æ—Ç—á–∏–∫–æ–≤\n\n–ü–æ–¥—Ä–æ–±–Ω–∞—è –¥–æ–∫—É–º–µ–Ω—Ç–∞—Ü–∏—è –Ω–∞—Ö–æ–¥–∏—Ç—Å—è –≤ —Ñ–∞–π–ª–µ **replit.md**, –≤–∫–ª—é—á–∞—è:\n- –°—Ç—Ä—É–∫—Ç—É—Ä—É –ø—Ä–æ–µ–∫—Ç–∞\n- –û–ø–∏—Å–∞–Ω–∏–µ –º–æ–¥–µ–ª–µ–π –¥–∞–Ω–Ω—ã—Ö\n- API endpoints\n- –ò–Ω—Å—Ç—Ä—É–∫—Ü–∏–∏ –ø–æ –∏–Ω—Ç–µ–≥—Ä–∞—Ü–∏–∏ LDAP\n- –ù–∞—Å—Ç—Ä–æ–π–∫—É –≤–Ω–µ—à–Ω–µ–π –±–∞–∑—ã –¥–∞–Ω–Ω—ã—Ö\n- –ò –º–Ω–æ–≥–æ–µ –¥—Ä—É–≥–æ–µ\n\n## üìù –°–ª–µ–¥—É—é—â–∏–µ —à–∞–≥–∏\n\n1. **–ù–∞—Å—Ç—Ä–æ–π—Ç–µ API –∫–ª—é—á** –¥–ª—è —Ä–∞–±–æ—Ç—ã –∫–∞—Ä—Ç—ã\n2. **–°–æ–∑–¥–∞–π—Ç–µ —Å—É–ø–µ—Ä–ø–æ–ª—å–∑–æ–≤–∞—Ç–µ–ª—è** –¥–ª—è –¥–æ—Å—Ç—É–ø–∞ –∫ –∞–¥–º–∏–Ω–∫–µ\n3. **–î–æ–±–∞–≤—å—Ç–µ —Å–≤–æ–∏ –ª–∏—Ü–µ–Ω–∑–∏–∏** —á–µ—Ä–µ–∑ –∞–¥–º–∏–Ω-–ø–∞–Ω–µ–ª—å\n4. –ü—Ä–∏ –Ω–µ–æ–±—Ö–æ–¥–∏–º–æ—Å—Ç–∏ **–∏–Ω—Ç–µ–≥—Ä–∏—Ä—É–π—Ç–µ LDAP** –∏–ª–∏ **–≤–Ω–µ—à–Ω—é—é –ë–î** (–∏–Ω—Å—Ç—Ä—É–∫—Ü–∏–∏ –≤ replit.md)\n\n---\n\n–°–æ–∑–¥–∞–Ω–æ —Å –∏—Å–ø–æ–ª—å–∑–æ–≤–∞–Ω–∏–µ–º Django 5.2.7 –∏ –Ø–Ω–¥–µ–∫—Å.–ö–∞—Ä—Ç API\n","size_bytes":3526},"licenses/models.py":{"content":"from django.db import models\nfrom django.contrib.auth.models import User\n\n\nclass License(models.Model):\n    \"\"\"\n    –ú–æ–¥–µ–ª—å –¥–ª—è —Ö—Ä–∞–Ω–µ–Ω–∏—è –∏–Ω—Ñ–æ—Ä–º–∞—Ü–∏–∏ –æ –ª–∏—Ü–µ–Ω–∑–∏—è—Ö –Ω–∞ –Ω–µ–¥—Ä–æ–ø–æ–ª—å–∑–æ–≤–∞–Ω–∏–µ\n    \"\"\"\n    license_number = models.CharField(max_length=100, unique=True, verbose_name=\"–ù–æ–º–µ—Ä –ª–∏—Ü–µ–Ω–∑–∏–∏\")\n    license_type = models.CharField(max_length=200, verbose_name=\"–í–∏–¥ –ø–æ–ª—å–∑–æ–≤–∞–Ω–∏—è –Ω–µ–¥—Ä–∞–º–∏\")\n    owner = models.CharField(max_length=300, verbose_name=\"–ù–µ–¥—Ä–æ–ø–æ–ª—å–∑–æ–≤–∞—Ç–µ–ª—å\")\n    \n    # –ì–µ–æ–ª–æ–∫–∞—Ü–∏—è –¥–ª—è –æ—Ç–æ–±—Ä–∞–∂–µ–Ω–∏—è –Ω–∞ –∫–∞—Ä—Ç–µ\n    latitude = models.DecimalField(max_digits=9, decimal_places=6, verbose_name=\"–®–∏—Ä–æ—Ç–∞\", null=True, blank=True)\n    longitude = models.DecimalField(max_digits=9, decimal_places=6, verbose_name=\"–î–æ–ª–≥–æ—Ç–∞\", null=True, blank=True)\n    \n    # –ü–æ–ª–∏–≥–æ–Ω (–∫–æ–Ω—Ç—É—Ä –ª–∏—Ü–µ–Ω–∑–∏–∏) –≤ —Ñ–æ—Ä–º–∞—Ç–µ GeoJSON\n    polygon_data = models.JSONField(verbose_name=\"–î–∞–Ω–Ω—ã–µ –ø–æ–ª–∏–≥–æ–Ω–∞ (GeoJSON)\", null=True, blank=True)\n    \n    # –ò–Ω—Ñ–æ—Ä–º–∞—Ü–∏—è –æ —Ç–µ—Ä—Ä–∏—Ç–æ—Ä–∏–∏\n    region = models.CharField(max_length=200, verbose_name=\"–†–µ–≥–∏–æ–Ω\")\n    area = models.CharField(max_length=300, verbose_name=\"–£—á–∞—Å—Ç–æ–∫ –Ω–µ–¥—Ä\", blank=True)\n    \n    # –î–∞—Ç—ã\n    issue_date = models.DateField(verbose_name=\"–î–∞—Ç–∞ –≤—ã–¥–∞—á–∏\")\n    expiry_date = models.DateField(verbose_name=\"–î–∞—Ç–∞ –æ–∫–æ–Ω—á–∞–Ω–∏—è\", null=True, blank=True)\n    \n    # –î–æ–ø–æ–ª–Ω–∏—Ç–µ–ª—å–Ω–∞—è –∏–Ω—Ñ–æ—Ä–º–∞—Ü–∏—è\n    mineral_type = models.CharField(max_length=200, verbose_name=\"–í–∏–¥ –ø–æ–ª–µ–∑–Ω–æ–≥–æ –∏—Å–∫–æ–ø–∞–µ–º–æ–≥–æ\", blank=True)\n    status = models.CharField(\n        max_length=50, \n        choices=[\n            ('active', '–î–µ–π—Å—Ç–≤—É—é—â–∞—è'),\n            ('expired', '–ò—Å—Ç–µ–∫–ª–∞'),\n            ('suspended', '–ü—Ä–∏–æ—Å—Ç–∞–Ω–æ–≤–ª–µ–Ω–∞'),\n            ('terminated', '–ü—Ä–µ–∫—Ä–∞—â–µ–Ω–∞'),\n        ],\n        default='active',\n        verbose_name=\"–°—Ç–∞—Ç—É—Å\"\n    )\n    \n    \n    description = models.TextField(verbose_name=\"–û–ø–∏—Å–∞–Ω–∏–µ\", blank=True)\n    \n    created_at = models.DateTimeField(auto_now_add=True, verbose_name=\"–î–∞—Ç–∞ —Å–æ–∑–¥–∞–Ω–∏—è –∑–∞–ø–∏—Å–∏\")\n    updated_at = models.DateTimeField(auto_now=True, verbose_name=\"–î–∞—Ç–∞ –æ–±–Ω–æ–≤–ª–µ–Ω–∏—è –∑–∞–ø–∏—Å–∏\")\n    \n    class Meta:\n        verbose_name = \"–õ–∏—Ü–µ–Ω–∑–∏—è\"\n        verbose_name_plural = \"–õ–∏—Ü–µ–Ω–∑–∏–∏\"\n        ordering = ['-created_at']\n    \n    def __str__(self):\n        return f\"{self.license_number} - {self.owner}\"\n\n    def update_status_if_expired(self):\n        \"\"\"\n        –ü—Ä–æ–≤–µ—Ä—è–µ—Ç –∏ –æ–±–Ω–æ–≤–ª—è–µ—Ç —Å—Ç–∞—Ç—É—Å –ª–∏—Ü–µ–Ω–∑–∏–∏, –µ—Å–ª–∏ —Å—Ä–æ–∫ –¥–µ–π—Å—Ç–≤–∏—è –∏—Å—Ç–µ–∫\n        \"\"\"\n        from datetime import date\n        \n        if self.expiry_date and self.expiry_date < date.today():\n            if self.status == 'active':\n                self.status = 'expired'\n                self.save(update_fields=['status'])\n        \n        return self.status\n\n\nclass Document(models.Model):\n    \"\"\"\n    –ú–æ–¥–µ–ª—å –¥–ª—è —Ö—Ä–∞–Ω–µ–Ω–∏—è –¥–æ–∫—É–º–µ–Ω—Ç–æ–≤, —Å–≤—è–∑–∞–Ω–Ω—ã—Ö —Å –ª–∏—Ü–µ–Ω–∑–∏—è–º–∏\n    \"\"\"\n    license = models.ForeignKey(\n        License, \n        on_delete=models.CASCADE, \n        related_name='documents',\n        verbose_name=\"–õ–∏—Ü–µ–Ω–∑–∏—è\"\n    )\n    title = models.CharField(max_length=300, verbose_name=\"–ù–∞–∑–≤–∞–Ω–∏–µ –¥–æ–∫—É–º–µ–Ω—Ç–∞\")\n    file = models.FileField(upload_to='license_documents/', verbose_name=\"–§–∞–π–ª\")\n    file_type = models.CharField(\n        max_length=50,\n        choices=[\n            ('license', '–õ–∏—Ü–µ–Ω–∑–∏—è'),\n            ('report', '–û—Ç—á–µ—Ç'),\n            ('map', '–ö–∞—Ä—Ç–∞'),\n            ('other', '–ü—Ä–æ—á–µ–µ'),\n        ],\n        default='other',\n        verbose_name=\"–¢–∏–ø –¥–æ–∫—É–º–µ–Ω—Ç–∞\"\n    )\n    uploaded_at = models.DateTimeField(auto_now_add=True, verbose_name=\"–î–∞—Ç–∞ –∑–∞–≥—Ä—É–∑–∫–∏\")\n    uploaded_by = models.ForeignKey(\n        User, \n        on_delete=models.SET_NULL, \n        null=True,\n        verbose_name=\"–ó–∞–≥—Ä—É–∑–∏–ª –ø–æ–ª—å–∑–æ–≤–∞—Ç–µ–ª—å\"\n    )\n    \n    class Meta:\n        verbose_name = \"–î–æ–∫—É–º–µ–Ω—Ç\"\n        verbose_name_plural = \"–î–æ–∫—É–º–µ–Ω—Ç—ã\"\n        ordering = ['-uploaded_at']\n    \n    def __str__(self):\n        return f\"{self.title} ({self.license.license_number})\"\n","size_bytes":4407},"licenses/migrations/__init__.py":{"content":"","size_bytes":0},"licenses/admin.py":{"content":"from django.contrib import admin\nfrom .models import License, Document\n\n\n@admin.register(License)\nclass LicenseAdmin(admin.ModelAdmin):\n    list_display = ['license_number', 'owner', 'license_type', 'region', 'status', 'issue_date']\n    list_filter = ['status', 'region', 'license_type']\n    search_fields = ['license_number', 'owner', 'region', 'mineral_type']\n    date_hierarchy = 'issue_date'\n    ordering = ['-created_at']\n    \n    fieldsets = (\n        ('–û—Å–Ω–æ–≤–Ω–∞—è –∏–Ω—Ñ–æ—Ä–º–∞—Ü–∏—è', {\n            'fields': ('license_number', 'license_type', 'owner', 'status')\n        }),\n        ('–¢–µ—Ä—Ä–∏—Ç–æ—Ä–∏—è', {\n            'fields': ('region', 'area', 'latitude', 'longitude')\n        }),\n        ('–î–∞—Ç—ã', {\n            'fields': ('issue_date', 'expiry_date')\n        }),\n        ('–î–æ–ø–æ–ª–Ω–∏—Ç–µ–ª—å–Ω–∞—è –∏–Ω—Ñ–æ—Ä–º–∞—Ü–∏—è', {\n            'fields': ('mineral_type', 'description')\n        }),\n    )\n\n\n@admin.register(Document)\nclass DocumentAdmin(admin.ModelAdmin):\n    list_display = ['title', 'license', 'file_type', 'uploaded_at', 'uploaded_by']\n    list_filter = ['file_type', 'uploaded_at']\n    search_fields = ['title', 'license__license_number']\n    date_hierarchy = 'uploaded_at'\n    ordering = ['-uploaded_at']\n    \n    fieldsets = (\n        ('–ò–Ω—Ñ–æ—Ä–º–∞—Ü–∏—è –æ –¥–æ–∫—É–º–µ–Ω—Ç–µ', {\n            'fields': ('license', 'title', 'file_type')\n        }),\n        ('–§–∞–π–ª', {\n            'fields': ('file',)\n        }),\n        ('–ú–µ—Ç–∞–¥–∞–Ω–Ω—ã–µ', {\n            'fields': ('uploaded_by',),\n            'classes': ('collapse',)\n        }),\n    )\n","size_bytes":1592},"mineral_licenses/settings.py":{"content":"\"\"\"\nDjango settings for mineral_licenses project.\n\nGenerated by 'django-admin startproject' using Django 5.2.7.\n\nFor more information on this file, see\nhttps://docs.djangoproject.com/en/5.2/topics/settings/\n\nFor the full list of settings and their values, see\nhttps://docs.djangoproject.com/en/5.2/ref/settings/\n\"\"\"\n\nfrom pathlib import Path\nimport os\n\n# Build paths inside the project like this: BASE_DIR / 'subdir'.\nBASE_DIR = Path(__file__).resolve().parent.parent\n\n\n# Quick-start development settings - unsuitable for production\n# See https://docs.djangoproject.com/en/5.2/howto/deployment/checklist/\n\n# SECURITY WARNING: keep the secret key used in production secret!\nSECRET_KEY = 'django-insecure-*kd=nc*+5frcmt#3ev&esny@u_wy6*6c(n8)+-5&nlqxg!hsja'\n\n# SECURITY WARNING: don't run with debug turned on in production!\nDEBUG = True\n\nALLOWED_HOSTS = ['*']\n\n# CSRF settings for Replit\n#CSRF_TRUSTED_ORIGINS = [\n#    'https://*.replit.dev',\n#    'https://*.repl.co',\n#]\n\n\n# Application definition\n\nINSTALLED_APPS = [\n    'django.contrib.admin',\n    'django.contrib.auth',\n    'django.contrib.contenttypes',\n    'django.contrib.sessions',\n    'django.contrib.messages',\n    'django.contrib.staticfiles',\n    'corsheaders',\n    'licenses',\n]\n\nMIDDLEWARE = [\n    'django.middleware.security.SecurityMiddleware',\n    'corsheaders.middleware.CorsMiddleware',\n    'django.contrib.sessions.middleware.SessionMiddleware',\n    'django.middleware.common.CommonMiddleware',\n    'django.middleware.csrf.CsrfViewMiddleware',\n    'django.contrib.auth.middleware.AuthenticationMiddleware',\n    'django.contrib.messages.middleware.MessageMiddleware',\n    'django.middleware.clickjacking.XFrameOptionsMiddleware',\n]\n\nROOT_URLCONF = 'mineral_licenses.urls'\n\nTEMPLATES = [\n    {\n        'BACKEND': 'django.template.backends.django.DjangoTemplates',\n        'DIRS': [],\n        'APP_DIRS': True,\n        'OPTIONS': {\n            'context_processors': [\n                'django.template.context_processors.request',\n                'django.contrib.auth.context_processors.auth',\n                'django.contrib.messages.context_processors.messages',\n            ],\n        },\n    },\n]\n\nWSGI_APPLICATION = 'mineral_licenses.wsgi.application'\n\n\n# Database\n# https://docs.djangoproject.com/en/5.2/ref/settings/#databases\n\n# DATABASES = {\n#     'default': {\n#         'ENGINE': 'django.db.backends.sqlite3',\n#         'NAME': BASE_DIR / 'db.sqlite3',\n#     }\n# }\n\nimport dj_database_url\n\nDATABASES = {\n    'default': dj_database_url.config(\n        default=os.getenv('DATABASE_URL'),\n        conn_max_age=600,\n        conn_health_checks=True,\n    )\n}\n\n\n# Password validation\n# https://docs.djangoproject.com/en/5.2/ref/settings/#auth-password-validators\n\nAUTH_PASSWORD_VALIDATORS = [\n    {\n        'NAME': 'django.contrib.auth.password_validation.UserAttributeSimilarityValidator',\n    },\n    {\n        'NAME': 'django.contrib.auth.password_validation.MinimumLengthValidator',\n    },\n    {\n        'NAME': 'django.contrib.auth.password_validation.CommonPasswordValidator',\n    },\n    {\n        'NAME': 'django.contrib.auth.password_validation.NumericPasswordValidator',\n    },\n]\n\n\n# Internationalization\n# https://docs.djangoproject.com/en/5.2/topics/i18n/\n\nLANGUAGE_CODE = 'ru-ru'\n\nTIME_ZONE = 'Europe/Moscow'\n\nUSE_I18N = True\n\nUSE_TZ = True\n\n\n# Static files (CSS, JavaScript, Images)\n# https://docs.djangoproject.com/en/5.2/howto/static-files/\n\nSTATIC_URL = 'static/'\nSTATIC_ROOT = BASE_DIR / 'staticfiles'\n\n# Media files\nMEDIA_URL = 'media/'\nMEDIA_ROOT = BASE_DIR / 'media'\n\n# Default primary key field type\n# https://docs.djangoproject.com/en/5.2/ref/settings/#default-auto-field\n\nDEFAULT_AUTO_FIELD = 'django.db.models.BigAutoField'\n\n# CORS settings\nCORS_ALLOW_ALL_ORIGINS = True\nCORS_ALLOW_CREDENTIALS = True\n\n# CSRF settings for Replit\n#CSRF_TRUSTED_ORIGINS = [\n#    'https://*.replit.dev',\n#    'https://*.repl.co',\n#]\n\n# –Ø–Ω–¥–µ–∫—Å.–ö–∞—Ä—Ç—ã API –∫–ª—é—á\n# –ü–æ–ª—É—á–∏—Ç–µ —Å–≤–æ–π API –∫–ª—é—á –Ω–∞ https://developer.tech.yandex.ru/\nYANDEX_MAPS_API_KEY = os.getenv('YANDEX_MAPS_API_KEY', '')\n\n# –ó–ê–ì–õ–£–®–ö–ê: LDAP Authentication\n# –†–∞—Å–∫–æ–º–º–µ–Ω—Ç–∏—Ä—É–π—Ç–µ –∏ –Ω–∞—Å—Ç—Ä–æ–π—Ç–µ –ø—Ä–∏ –ø–æ–¥–∫–ª—é—á–µ–Ω–∏–∏ –∫ LDAP —Å–µ—Ä–≤–µ—Ä—É\n# import ldap\n# from django_auth_ldap.config import LDAPSearch, GroupOfNamesType\n# \n# AUTHENTICATION_BACKENDS = [\n#     'django_auth_ldap.backend.LDAPBackend',\n#     'django.contrib.auth.backends.ModelBackend',\n# ]\n# \n# AUTH_LDAP_SERVER_URI = 'ldap://your-ldap-server.com'\n# AUTH_LDAP_BIND_DN = 'cn=admin,dc=example,dc=com'\n# AUTH_LDAP_BIND_PASSWORD = 'your-password'\n# AUTH_LDAP_USER_SEARCH = LDAPSearch(\n#     'ou=users,dc=example,dc=com',\n#     ldap.SCOPE_SUBTREE,\n#     '(uid=%(user)s)'\n# )\n\n# –ó–ê–ì–õ–£–®–ö–ê: –í–Ω–µ—à–Ω—è—è –±–∞–∑–∞ –¥–∞–Ω–Ω—ã—Ö\n# –ó–∞–º–µ–Ω–∏—Ç–µ –Ω–∞ —Å–≤–æ–∏ –Ω–∞—Å—Ç—Ä–æ–π–∫–∏ –ø—Ä–∏ –ø–æ–¥–∫–ª—é—á–µ–Ω–∏–∏ –∫ –ø—Ä–æ–¥–∞–∫—à–Ω –ë–î\n# DATABASES = {\n#     'default': {\n#         'ENGINE': 'django.db.backends.postgresql',\n#         'NAME': 'your_database_name',\n#         'USER': 'your_database_user',\n#         'PASSWORD': 'your_database_password',\n#         'HOST': 'your-database-host.com',\n#         'PORT': '5432',\n#     }\n# }\n","size_bytes":5190},"mineral_licenses/asgi.py":{"content":"\"\"\"\nASGI config for mineral_licenses project.\n\nIt exposes the ASGI callable as a module-level variable named ``application``.\n\nFor more information on this file, see\nhttps://docs.djangoproject.com/en/5.2/howto/deployment/asgi/\n\"\"\"\n\nimport os\n\nfrom django.core.asgi import get_asgi_application\n\nos.environ.setdefault('DJANGO_SETTINGS_MODULE', 'mineral_licenses.settings')\n\napplication = get_asgi_application()\n","size_bytes":409},"licenses/management/__init__.py":{"content":"","size_bytes":0},"licenses/urls.py":{"content":"from django.urls import path\nfrom . import views\n\nurlpatterns = [\n    path('', views.map_view, name='map'),\n    path('api/licenses/', views.licenses_json, name='licenses_json'),\n    path('api/licenses/<int:license_id>/', views.license_detail, name='license_detail'),\n    path('api/licenses/<int:license_id>/upload/', views.upload_document, name='upload_document'),\n    path('api/documents/<int:document_id>/download/', views.download_document, name='download_document'),\n    path('login/', views.login_view, name='login'),\n    path('logout/', views.logout_view, name='logout'),\n]\n","size_bytes":580},"licenses/migrations/0001_initial.py":{"content":"# Generated by Django 5.2.7 on 2025-10-16 04:01\n\nimport django.db.models.deletion\nfrom django.conf import settings\nfrom django.db import migrations, models\n\n\nclass Migration(migrations.Migration):\n\n    initial = True\n\n    dependencies = [\n        migrations.swappable_dependency(settings.AUTH_USER_MODEL),\n    ]\n\n    operations = [\n        migrations.CreateModel(\n            name='License',\n            fields=[\n                ('id', models.BigAutoField(auto_created=True, primary_key=True, serialize=False, verbose_name='ID')),\n                ('license_number', models.CharField(max_length=100, unique=True, verbose_name='–ù–æ–º–µ—Ä –ª–∏—Ü–µ–Ω–∑–∏–∏')),\n                ('license_type', models.CharField(max_length=200, verbose_name='–í–∏–¥ –ø–æ–ª—å–∑–æ–≤–∞–Ω–∏—è –Ω–µ–¥—Ä–∞–º–∏')),\n                ('owner', models.CharField(max_length=300, verbose_name='–ù–µ–¥—Ä–æ–ø–æ–ª—å–∑–æ–≤–∞—Ç–µ–ª—å')),\n                ('latitude', models.DecimalField(decimal_places=6, max_digits=9, verbose_name='–®–∏—Ä–æ—Ç–∞')),\n                ('longitude', models.DecimalField(decimal_places=6, max_digits=9, verbose_name='–î–æ–ª–≥–æ—Ç–∞')),\n                ('region', models.CharField(max_length=200, verbose_name='–†–µ–≥–∏–æ–Ω')),\n                ('area', models.CharField(blank=True, max_length=300, verbose_name='–£—á–∞—Å—Ç–æ–∫ –Ω–µ–¥—Ä')),\n                ('issue_date', models.DateField(verbose_name='–î–∞—Ç–∞ –≤—ã–¥–∞—á–∏')),\n                ('expiry_date', models.DateField(blank=True, null=True, verbose_name='–î–∞—Ç–∞ –æ–∫–æ–Ω—á–∞–Ω–∏—è')),\n                ('mineral_type', models.CharField(blank=True, max_length=200, verbose_name='–í–∏–¥ –ø–æ–ª–µ–∑–Ω–æ–≥–æ –∏—Å–∫–æ–ø–∞–µ–º–æ–≥–æ')),\n                ('status', models.CharField(choices=[('active', '–î–µ–π—Å—Ç–≤—É—é—â–∞—è'), ('expired', '–ò—Å—Ç–µ–∫–ª–∞'), ('suspended', '–ü—Ä–∏–æ—Å—Ç–∞–Ω–æ–≤–ª–µ–Ω–∞'), ('terminated', '–ü—Ä–µ–∫—Ä–∞—â–µ–Ω–∞')], default='active', max_length=50, verbose_name='–°—Ç–∞—Ç—É—Å')),\n                ('description', models.TextField(blank=True, verbose_name='–û–ø–∏—Å–∞–Ω–∏–µ')),\n                ('created_at', models.DateTimeField(auto_now_add=True, verbose_name='–î–∞—Ç–∞ —Å–æ–∑–¥–∞–Ω–∏—è –∑–∞–ø–∏—Å–∏')),\n                ('updated_at', models.DateTimeField(auto_now=True, verbose_name='–î–∞—Ç–∞ –æ–±–Ω–æ–≤–ª–µ–Ω–∏—è –∑–∞–ø–∏—Å–∏')),\n            ],\n            options={\n                'verbose_name': '–õ–∏—Ü–µ–Ω–∑–∏—è',\n                'verbose_name_plural': '–õ–∏—Ü–µ–Ω–∑–∏–∏',\n                'ordering': ['-created_at'],\n            },\n        ),\n        migrations.CreateModel(\n            name='Document',\n            fields=[\n                ('id', models.BigAutoField(auto_created=True, primary_key=True, serialize=False, verbose_name='ID')),\n                ('title', models.CharField(max_length=300, verbose_name='–ù–∞–∑–≤–∞–Ω–∏–µ –¥–æ–∫—É–º–µ–Ω—Ç–∞')),\n                ('file', models.FileField(upload_to='license_documents/', verbose_name='–§–∞–π–ª')),\n                ('file_type', models.CharField(choices=[('license', '–õ–∏—Ü–µ–Ω–∑–∏—è'), ('report', '–û—Ç—á–µ—Ç'), ('map', '–ö–∞—Ä—Ç–∞'), ('other', '–ü—Ä–æ—á–µ–µ')], default='other', max_length=50, verbose_name='–¢–∏–ø –¥–æ–∫—É–º–µ–Ω—Ç–∞')),\n                ('uploaded_at', models.DateTimeField(auto_now_add=True, verbose_name='–î–∞—Ç–∞ –∑–∞–≥—Ä—É–∑–∫–∏')),\n                ('uploaded_by', models.ForeignKey(null=True, on_delete=django.db.models.deletion.SET_NULL, to=settings.AUTH_USER_MODEL, verbose_name='–ó–∞–≥—Ä—É–∑–∏–ª –ø–æ–ª—å–∑–æ–≤–∞—Ç–µ–ª—å')),\n                ('license', models.ForeignKey(on_delete=django.db.models.deletion.CASCADE, related_name='documents', to='licenses.license', verbose_name='–õ–∏—Ü–µ–Ω–∑–∏—è')),\n            ],\n            options={\n                'verbose_name': '–î–æ–∫—É–º–µ–Ω—Ç',\n                'verbose_name_plural': '–î–æ–∫—É–º–µ–Ω—Ç—ã',\n                'ordering': ['-uploaded_at'],\n            },\n        ),\n    ]\n","size_bytes":3896},"licenses/migrations/0002_license_polygon_data_alter_license_latitude_and_more.py":{"content":"# Generated by Django 5.2.7 on 2025-10-28 01:39\n\nfrom django.db import migrations, models\n\n\nclass Migration(migrations.Migration):\n\n    dependencies = [\n        ('licenses', '0001_initial'),\n    ]\n\n    operations = [\n        migrations.AddField(\n            model_name='license',\n            name='polygon_data',\n            field=models.JSONField(blank=True, null=True, verbose_name='–î–∞–Ω–Ω—ã–µ –ø–æ–ª–∏–≥–æ–Ω–∞ (GeoJSON)'),\n        ),\n        migrations.AlterField(\n            model_name='license',\n            name='latitude',\n            field=models.DecimalField(blank=True, decimal_places=6, max_digits=9, null=True, verbose_name='–®–∏—Ä–æ—Ç–∞'),\n        ),\n        migrations.AlterField(\n            model_name='license',\n            name='longitude',\n            field=models.DecimalField(blank=True, decimal_places=6, max_digits=9, null=True, verbose_name='–î–æ–ª–≥–æ—Ç–∞'),\n        ),\n    ]\n","size_bytes":904},"licenses/management/commands/import_geojson.py":{"content":"import json\nimport re\nfrom datetime import date, datetime\nfrom django.core.management.base import BaseCommand\nfrom licenses.models import License\n\n\nclass Command(BaseCommand):\n    help = '–ò–º–ø–æ—Ä—Ç –ª–∏—Ü–µ–Ω–∑–∏–π –∏–∑ GeoJSON —Ñ–∞–π–ª–∞'\n\n    def add_arguments(self, parser):\n        parser.add_argument('geojson_file', type=str, help='–ü—É—Ç—å –∫ GeoJSON —Ñ–∞–π–ª—É')\n\n    def handle(self, *args, **options):\n        geojson_file = options['geojson_file']\n        \n        self.stdout.write(self.style.SUCCESS(f'–ó–∞–≥—Ä—É–∑–∫–∞ –¥–∞–Ω–Ω—ã—Ö –∏–∑ {geojson_file}...'))\n        \n        with open(geojson_file, 'r', encoding='utf-8') as f:\n            data = json.load(f)\n        \n        features = data.get('features', [])\n        self.stdout.write(f'–ù–∞–π–¥–µ–Ω–æ –æ–±—ä–µ–∫—Ç–æ–≤: {len(features)}')\n        \n        imported_count = 0\n        skipped_count = 0\n        updated_count = 0\n        \n        for feature in features:\n            try:\n                # –ò–∑–≤–ª–µ–∫–∞–µ–º –¥–∞–Ω–Ω—ã–µ\n                geometry = feature['geometry']\n                properties = feature['properties']\n                description = properties.get('description', '')\n                fill_color = properties.get('fill', '')\n                \n                # –ü–∞—Ä—Å–∏–º –æ–ø–∏—Å–∞–Ω–∏–µ\n                parsed = self.parse_description(description)\n                \n                if not parsed['license_number']:\n                    self.stdout.write(self.style.WARNING(f'–ü—Ä–æ–ø—É—Å–∫: –Ω–µ –Ω–∞–π–¥–µ–Ω –Ω–æ–º–µ—Ä –ª–∏—Ü–µ–Ω–∑–∏–∏ –≤ \"{description[:100]}\"'))\n                    skipped_count += 1\n                    continue\n                \n                # –û–ø—Ä–µ–¥–µ–ª—è–µ–º —Å—Ç–∞—Ç—É—Å –ø–æ —Ü–≤–µ—Ç—É\n                status = self.get_status_from_color(fill_color, description)\n                \n                # –í—ã—á–∏—Å–ª—è–µ–º —Ü–µ–Ω—Ç—Ä –ø–æ–ª–∏–≥–æ–Ω–∞\n                center = self.calculate_polygon_center(geometry['coordinates'], geometry.get('type', 'Polygon'))\n                \n                # –û–ø—Ä–µ–¥–µ–ª—è–µ–º —Ä–µ–≥–∏–æ–Ω –ø–æ –ø—Ä–µ—Ñ–∏–∫—Å—É –Ω–æ–º–µ—Ä–∞ –ª–∏—Ü–µ–Ω–∑–∏–∏\n                region = self.extract_region(parsed['license_number'])\n                \n                # –ü—Ä–æ–≤–µ—Ä—è–µ–º, —Å—É—â–µ—Å—Ç–≤—É–µ—Ç –ª–∏ –ª–∏—Ü–µ–Ω–∑–∏—è\n                license_obj, created = License.objects.update_or_create(\n                    license_number=parsed['license_number'],\n                    defaults={\n                        'license_type': parsed['license_type'],\n                        'owner': parsed['owner'],\n                        'latitude': center[1] if center else None,\n                        'longitude': center[0] if center else None,\n                        'polygon_data': geometry,\n                        'region': region,\n                        'area': parsed['area_name'],\n                        'issue_date': date.today(),\n                        'mineral_type': '–ó–æ–ª–æ—Ç–æ',\n                        'status': status,\n                        'description': description.replace('<br/>', '\\n'),\n                    }\n                )\n                \n                if created:\n                    imported_count += 1\n                    self.stdout.write(f'‚úì –°–æ–∑–¥–∞–Ω–∞: {parsed[\"license_number\"]}')\n                else:\n                    updated_count += 1\n                    self.stdout.write(f'‚Üª –û–±–Ω–æ–≤–ª–µ–Ω–∞: {parsed[\"license_number\"]}')\n                    \n            except Exception as e:\n                self.stdout.write(self.style.ERROR(f'–û—à–∏–±–∫–∞ –æ–±—Ä–∞–±–æ—Ç–∫–∏ –æ–±—ä–µ–∫—Ç–∞: {str(e)}'))\n                skipped_count += 1\n                continue\n        \n        self.stdout.write(self.style.SUCCESS(f'\\n=== –ò—Ç–æ–≥–∏ –∏–º–ø–æ—Ä—Ç–∞ ==='))\n        self.stdout.write(self.style.SUCCESS(f'–°–æ–∑–¥–∞–Ω–æ –Ω–æ–≤—ã—Ö: {imported_count}'))\n        self.stdout.write(self.style.SUCCESS(f'–û–±–Ω–æ–≤–ª–µ–Ω–æ: {updated_count}'))\n        self.stdout.write(self.style.WARNING(f'–ü—Ä–æ–ø—É—â–µ–Ω–æ: {skipped_count}'))\n        self.stdout.write(self.style.SUCCESS(f'–í—Å–µ–≥–æ –æ–±—Ä–∞–±–æ—Ç–∞–Ω–æ: {imported_count + updated_count + skipped_count}'))\n\n    def parse_description(self, description):\n        \"\"\"–ü–∞—Ä—Å–∏—Ç –æ–ø–∏—Å–∞–Ω–∏–µ –ª–∏—Ü–µ–Ω–∑–∏–∏\"\"\"\n        # –£–¥–∞–ª—è–µ–º HTML —Ç–µ–≥–∏\n        text = description.replace('<br/>', ' | ').strip()\n        \n        result = {\n            'license_number': '',\n            'license_type': '',\n            'area_name': '',\n            'owner': '',\n            'area_size': ''\n        }\n        \n        # –†–∞–∑–±–∏–≤–∞–µ–º –ø–æ —Ä–∞–∑–¥–µ–ª–∏—Ç–µ–ª—é |\n        parts = [p.strip() for p in text.split('|')]\n        \n        if len(parts) > 0:\n            # –ü–µ—Ä–≤–∞—è —á–∞—Å—Ç—å –æ–±—ã—á–Ω–æ —Å–æ–¥–µ—Ä–∂–∏—Ç –Ω–æ–º–µ—Ä, —Ç–∏–ø –∏ –Ω–∞–∑–≤–∞–Ω–∏–µ\n            first_part = parts[0]\n            \n            # –ü—ã—Ç–∞–µ–º—Å—è –∏–∑–≤–ª–µ—á—å –Ω–æ–º–µ—Ä –ª–∏—Ü–µ–Ω–∑–∏–∏ (—Ñ–æ—Ä–º–∞—Ç: –ß–ò–¢ 011511, –ú–ê–ì 04663, –∏ —Ç.–¥.)\n            license_match = re.search(r'([–ê-–Ø–Å]{3}\\s+\\d{5,6})', first_part)\n            if license_match:\n                result['license_number'] = license_match.group(1)\n                \n                # –í—Å—ë –ø–æ—Å–ª–µ –Ω–æ–º–µ—Ä–∞ - —ç—Ç–æ —Ç–∏–ø –∏ –Ω–∞–∑–≤–∞–Ω–∏–µ\n                remainder = first_part[license_match.end():].strip()\n                \n                # –¢–∏–ø –æ–±—ã—á–Ω–æ –∏–¥—ë—Ç —Å—Ä–∞–∑—É –ø–æ—Å–ª–µ –Ω–æ–º–µ—Ä–∞ (–ë–≠, –ë–ü, –ë–† –∏ —Ç.–¥.)\n                type_match = re.match(r'(–ë–≠|–ë–ü|–ë–†|–ì–†–†)\\s+(.*)', remainder)\n                if type_match:\n                    result['license_type'] = f\"{type_match.group(1)} - {type_match.group(2)}\"\n                    result['area_name'] = type_match.group(2)\n                else:\n                    result['license_type'] = remainder\n                    result['area_name'] = remainder\n        \n        # –ü–ª–æ—â–∞–¥—å\n        if len(parts) > 1:\n            area_match = re.search(r'–ü–ª–æ—â–∞–¥—å:\\s*([\\d,]+)\\s*–∫–≤\\.–∫–º', parts[1])\n            if area_match:\n                result['area_size'] = area_match.group(1)\n        \n        # –í–ª–∞–¥–µ–ª–µ—Ü - –æ–±—ã—á–Ω–æ –ø–æ—Å–ª–µ–¥–Ω—è—è —á–∞—Å—Ç—å\n        if len(parts) > 2:\n            result['owner'] = parts[2].strip()\n        elif len(parts) > 1 and '–ü–ª–æ—â–∞–¥—å' not in parts[1]:\n            result['owner'] = parts[1].strip()\n        else:\n            result['owner'] = '–ù–µ —É–∫–∞–∑–∞–Ω'\n            \n        return result\n\n    def get_status_from_color(self, color, description):\n        \"\"\"–û–ø—Ä–µ–¥–µ–ª—è–µ—Ç —Å—Ç–∞—Ç—É—Å –ª–∏—Ü–µ–Ω–∑–∏–∏ –ø–æ —Ü–≤–µ—Ç—É\"\"\"\n        color = color.lower()\n        \n        if color == '#1bad03':\n            return 'terminated'\n        elif color == '#ed4543':\n            return 'active'\n        elif color in ['#0e4779', '#006edb']:\n            return 'active'\n        elif 'purple' in color or 'violet' in color or '#9b30ff' in color:\n            return 'suspended'\n        else:\n            return 'active'\n\n    def calculate_polygon_center(self, coordinates, geom_type='Polygon'):\n        \"\"\"–í—ã—á–∏—Å–ª—è–µ—Ç —Ü–µ–Ω—Ç—Ä –ø–æ–ª–∏–≥–æ–Ω–∞ (–ø–æ–¥–¥–µ—Ä–∂–∏–≤–∞–µ—Ç Polygon –∏ MultiPolygon)\"\"\"\n        if not coordinates or len(coordinates) == 0:\n            return None\n        \n        if geom_type == 'MultiPolygon':\n            # –î–ª—è MultiPolygon –±–µ—Ä—ë–º –ø–µ—Ä–≤—ã–π –ø–æ–ª–∏–≥–æ–Ω\n            if not coordinates[0] or len(coordinates[0]) == 0:\n                return None\n            outer_ring = coordinates[0][0]\n        else:\n            # –î–ª—è –æ–±—ã—á–Ω–æ–≥–æ Polygon –±–µ—Ä—ë–º –≤–Ω–µ—à–Ω–∏–π –∫–æ–Ω—Ç—É—Ä (–ø–µ—Ä–≤—ã–π –º–∞—Å—Å–∏–≤)\n            outer_ring = coordinates[0]\n        \n        if not outer_ring or len(outer_ring) == 0:\n            return None\n        \n        # –í—ã—á–∏—Å–ª—è–µ–º —Å—Ä–µ–¥–Ω–µ–µ –∞—Ä–∏—Ñ–º–µ—Ç–∏—á–µ—Å–∫–æ–µ –∫–æ–æ—Ä–¥–∏–Ω–∞—Ç\n        lon_sum = sum(coord[0] for coord in outer_ring)\n        lat_sum = sum(coord[1] for coord in outer_ring)\n        count = len(outer_ring)\n        \n        return [lon_sum / count, lat_sum / count]\n\n    def extract_region(self, license_number):\n        \"\"\"–ò–∑–≤–ª–µ–∫–∞–µ—Ç –Ω–∞–∑–≤–∞–Ω–∏–µ —Ä–µ–≥–∏–æ–Ω–∞ –∏–∑ –ø—Ä–µ—Ñ–∏–∫—Å–∞ –Ω–æ–º–µ—Ä–∞ –ª–∏—Ü–µ–Ω–∑–∏–∏\"\"\"\n        regions = {\n            '–ú–ê–ì': '–ú–∞–≥–∞–¥–∞–Ω—Å–∫–∞—è –æ–±–ª–∞—Å—Ç—å',\n            '–ö–ï–ú': '–ö–µ–º–µ—Ä–æ–≤—Å–∫–∞—è –æ–±–ª–∞—Å—Ç—å',\n            '–ü–ï–ú': '–ü–µ—Ä–º—Å–∫–∏–π –∫—Ä–∞–π',\n            '–ß–ò–¢': '–ó–∞–±–∞–π–∫–∞–ª—å—Å–∫–∏–π –∫—Ä–∞–π',\n            '–°–ê–•': '–°–∞—Ö–∞–ª–∏–Ω—Å–∫–∞—è –æ–±–ª–∞—Å—Ç—å',\n            '–ò–†–ö': '–ò—Ä–∫—É—Ç—Å–∫–∞—è –æ–±–ª–∞—Å—Ç—å',\n            '–ê–ú–£': '–ê–º—É—Ä—Å–∫–∞—è –æ–±–ª–∞—Å—Ç—å',\n            '–•–ê–ë': '–•–∞–±–∞—Ä–æ–≤—Å–∫–∏–π –∫—Ä–∞–π',\n            '–ö–†–ê': '–ö—Ä–∞—Å–Ω–æ—è—Ä—Å–∫–∏–π –∫—Ä–∞–π',\n            '–ë–£–†': '–†–µ—Å–ø—É–±–ª–∏–∫–∞ –ë—É—Ä—è—Ç–∏—è',\n            '–Ø–ö–£': '–†–µ—Å–ø—É–±–ª–∏–∫–∞ –°–∞—Ö–∞ (–Ø–∫—É—Ç–∏—è)',\n            '–¢–Æ–ú': '–¢—é–º–µ–Ω—Å–∫–∞—è –æ–±–ª–∞—Å—Ç—å',\n        }\n        \n        prefix = license_number[:3]\n        return regions.get(prefix, '–†–µ–≥–∏–æ–Ω –Ω–µ –æ–ø—Ä–µ–¥–µ–ª—ë–Ω')\n","size_bytes":9097}},"version":2}